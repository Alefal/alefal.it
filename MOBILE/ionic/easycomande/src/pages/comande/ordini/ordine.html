<ion-header>
  <ion-navbar color="dark">
    <ion-buttons left>
      <button ion-button icon-only (click)="dismiss()">
        <ion-icon ios="ios-close" md="md-close"></ion-icon>
      </button>
    </ion-buttons>

    <ion-title>{{ordine.note}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-fab top right edge>
    <button ion-fab mini color="dark"><ion-icon name="ios-arrow-down"></ion-icon></button>
    <ion-fab-list>
      <button *ngIf="ordine.status != 'completed'" ion-fab (click)="editOrder(ordine)"><ion-icon name="create"></ion-icon></button>
      <button *ngIf="ordine.status != 'completed'" ion-fab (click)="addNote(ordine.id)"><ion-icon name="list"></ion-icon></button>
      <button ion-fab (click)="showNote(ordine.id)"><ion-icon name="eye"></ion-icon></button>
      <button ion-fab (click)="deleteOrder(ordine.id)"><ion-icon name="trash"></ion-icon></button>
    </ion-fab-list>
  </ion-fab>
  
  <ion-list>

    <ion-item>
      <h3>Ordine per <strong>{{ordine.note}}</strong></h3>
    </ion-item>

    <ion-item>
      <p>Eseguito il</p>
      <h2>{{ordine.created_at | date : 'dd/MM, HH:mm'}}</h2>
    </ion-item>

    <ion-item>
      <p>Totale (Servizio incluso)</p>
      <h2>{{ordine.total}}</h2>
    </ion-item>

    <ion-item *ngIf="ordine.tax_lines[0]">
      <p>Servizio</p>
      <h2>{{ordine.tax_lines[0].total}}</h2>
    </ion-item>

    <ion-item *ngIf="ordine.line_items[0]">
      <!--
      <p>Prodotti</p>
      <h3><strong>{{ordine.total_line_items_quantity}}</strong> prodotto/i acquistato/i</h3>
      -->
      <p>Piatti da menu ({{ordine.total_line_items_quantity}})</p>
      <ion-icon name="menu" item-right></ion-icon>
    </ion-item>

    <ion-item *ngFor="let prod of ordine.line_items">
      <ion-icon *ngIf="ordine.status != 'completed'" name="remove-circle" color="danger" item-left (click)="deleteProduct(ordine.id,prod)"></ion-icon>
      <ion-icon *ngIf="ordine.status == 'completed'" name="checkmark" color="secondary" item-left></ion-icon>
      <h2>{{prod.quantity}} x {{prod.name}}</h2>

      <ion-card class="prodMetaCard" *ngFor="let meta of prod.meta">
        <ion-card-content *ngIf="meta.value != ''">
          <ion-row>
            <ion-col col-11 class="prodMeta">
              {{meta.value}}
            </ion-col>
            <ion-col col-1>
              <!--
              <ion-icon name="close" color="danger" item-left (click)="removeMetaProduct(prod)"></ion-icon>
              -->
            </ion-col>
          </ion-row>
        </ion-card-content>
      </ion-card>

      <ion-note item-right>
        <em>&euro; {{prod.quantity * prod.price}}</em>
      </ion-note>
    </ion-item>

    <ion-item *ngIf="ordine.shipping_lines[0]">
      <p>Piatti speciali</p>
      <ion-icon name="restaurant" item-right></ion-icon>
    </ion-item>

    <ion-item *ngFor="let ship of ordine.shipping_lines">
      <ion-icon *ngIf="ordine.status != 'completed'" name="remove-circle" color="danger" item-left (click)="deleteShip(ordine.id,ship)"></ion-icon>
      <ion-icon *ngIf="ordine.status == 'completed'" name="checkmark" color="secondary" item-left></ion-icon>
      <h2>{{ship.method_title}}</h2>
      <ion-note item-right>
        <em>&euro; {{ship.total}}</em>
      </ion-note>
    </ion-item>

  </ion-list>

  <!--
  <div>
    <ion-fab right top>
      <button ion-fab color="dark"><ion-icon name="ios-arrow-back"></ion-icon></button>
      <ion-fab-list side="left">
        <button ion-fab color="dark" (click)="sendMail(ordine.customer.email)"><ion-icon name="mail"></ion-icon></button>
        <button ion-fab color="dark" (click)="changeStatus(ordine,ordine.status)"><ion-icon name="swap"></ion-icon></button>
        <button ion-fab color="dark" (click)="deleteOrder(ordine.id)"><ion-icon name="trash"></ion-icon></button>
        <button ion-fab color="dark" (click)="showNote(ordine.id)"><ion-icon name="paper"></ion-icon></button>
      </ion-fab-list>
    </ion-fab>
  </div>
  -->

</ion-content>

<!--
<ion-footer>
  <ion-navbar color="primary">
    <ion-title>Gestione</ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="deleteOrder(ordine.id)"><ion-icon name="trash"></ion-icon></button>
      <button ion-button icon-only (click)="showNote(ordine.id)"><ion-icon name="create"></ion-icon></button>
    </ion-buttons>

  </ion-navbar>
</ion-footer>
-->