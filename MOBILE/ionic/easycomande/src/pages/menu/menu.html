<ion-header>
  <ion-navbar color="dark">
    <ion-title>Easy Comande (v.1.0.8)</ion-title>

    <ion-buttons end>
      <button ion-button icon-only *ngIf="connectivityService.connectivityFound" (click)="connectivityService.showConnectionInfo('Connessione ok')">
        <ion-icon name="ios-wifi"></ion-icon>
      </button>
      <button ion-button icon-only *ngIf="!connectivityService.connectivityFound" (click)="connectivityService.showConnectionInfo('Connessione assente. Alcune operazioni non sono disponibili!')">
        <ion-icon name="information-circle"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>
</ion-header>

<ion-content>

  <ion-segment>
    <ion-segment-button *ngFor="let cat of categories  | orderBy:'id'" (click)="loadData(cat.name)" [class.active]="cat.name == categoryName">
      {{cat.name}}
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="products?.length > 0">
    <ion-list>
      <ion-item><h3>{{categoryName}}</h3></ion-item>
      <ion-item *ngFor="let prod of products | orderBy:'title'">
        <ion-thumbnail item-left>
          <img src="{{prod.images[0].src}}" />
        </ion-thumbnail>
        <h2>{{prod.title}}
          <ion-badge color="secondary">{{prod.category}}</ion-badge>
        </h2>
        <h3><i [innerHTML]="prod.description"></i></h3>
        <!--
        <ion-badge item-right color="secondary" *ngIf="prod.price != ''">
          <ion-icon name="logo-euro"></ion-icon> {{prod.price}}
        </ion-badge>
        -->
        <ion-note item-right *ngIf="prod.price != ''">
          <em>&euro; {{prod.price}}</em>
        </ion-note>
      </ion-item>
    </ion-list>
  </div>

  <ion-fab right bottom *ngIf="connectivityService.connectivityFound">
    <button padding ion-fab (click)="dataRefresh()" color="dark" style="margin-bottom:15px;"><ion-icon name="refresh"></ion-icon></button>
  </ion-fab>

</ion-content>