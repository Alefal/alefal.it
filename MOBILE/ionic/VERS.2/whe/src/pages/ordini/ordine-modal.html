<ion-header>
  <ion-navbar color="primary">
    <ion-title>Ordine</ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="dismiss()">
        <ion-icon ios="ios-close" md="md-close"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>
</ion-header>

<ion-content>
	
    <ion-list *ngIf="sectionCreate">
      <ion-item>
        <ion-label>Cliente *</ion-label>
        <ion-select [(ngModel)]="selectedUser" cancelText="Chiudi" okText="Scegli cliente" required>
          <ion-option *ngFor="let cust of customer" [value]="cust.user_email">{{cust.display_name}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Prodotti *</ion-label>
        <ion-select [(ngModel)]="selectedProducts" multiple="true" cancelText="Chiudi" okText="Scegli prodotti"required>
          <ion-option *ngFor="let prod of line_items" [value]="prod.id" (click)="setChecked(prod.id,prod.title,prod.price,prod.description,prod.stock)">{{prod.title}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>
    <button *ngIf="sectionCreate" ion-button large full color="dark" (click)="orderStep2()">Avanti</button>

    <form (ngSubmit)="saveOrder(ordine)" *ngIf="sectionDetail">
      <ion-list>
        <ion-item>
          <p>Cliente</p>
          <h2>{{ordine.customer.first_name}}</h2>
        </ion-item>

        <ion-item>
          <p>Totale</p>
          <h2>{{ordine.total}}</h2>
        </ion-item>
      </ion-list>
      <button ion-button large full color="dark" type="submit">Salva Ordine</button>
    </form>


    <div *ngIf="showButtonEditDelete">
      <ion-fab right bottom>
        <button ion-fab color="dark"><ion-icon name="ios-arrow-back"></ion-icon></button>
        <ion-fab-list side="left">
          <button ion-fab color="dark" (click)="sendMail(ordine.customer.email)"><ion-icon name="mail"></ion-icon></button>
          <button ion-fab color="dark" (click)="changeStatus(ordine.id,ordine.status)"><ion-icon name="swap"></ion-icon></button>
          <button ion-fab color="dark" (click)="deleteOrder(ordine.id)"><ion-icon name="trash"></ion-icon></button>
        </ion-fab-list>
      </ion-fab>
  </div>


</ion-content>